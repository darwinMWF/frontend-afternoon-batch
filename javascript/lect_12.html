<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API promise and async-await</title>
  </head>
  <body>
    <!-- asyncronus task
    syncrounus task  -->
    <script>
      // console.log("hello");
      // console.log("duniya");
      // setTimeout(() => {
      //     console.log("my name is mukesh")
      // }, 5000);
      // setTimeout(() => {
      //     console.log("my name is mukesh")
      // }, 5000);
      // setTimeout(() => {
      //     console.log("my name is mukesh")
      // }, 5000);
      // console.log("hello rakesh")
      // console.log("hello duniya")

      //   const obj = new Promise(function (resolve, reject) {
      //     const age = parseFloat(prompt("enter your age"));
      //     if (age > 18) {
      //       setTimeout(() => {
      //         resolve("resolved");
      //       }, 2000);
      //     } else {
      //       setTimeout(() => {
      //         reject("function not working");
      //       }, 1000);
      //     }
      //   });

      // console.log(obj)

      //   obj
      //     .then(function (resResolve) {
      //       return new Promise(function (resolve, reject) {
      //         setTimeout(() => {
      //           resolve("done " + resResolve);
      //         }, 1000);
      //       });
      //     })
      //     .then(function (res) {
      //       console.log(res);
      //     })
      //     .catch(function (err) {
      //       console.log(err);
      //     });

      function fetchData() {
        //    fetch("https://jsonplaceholder.typicode.com/posts").then(function(res){
        //        return  res.text()
        //     }).then(function(result){
        //        return JSON.parse(result)
        //     })
        //     .then(function(finalresult){
        //         console.log(finalresult)
        //     }).catch(function(err){
        //         console.log(err.message)
        //     })

        //data get
        fetch("https://jsonplaceholder.typicode.com/posts")
          .then(function (res) {
            return res.json();
          })
          .then(function (result) {
            console.log(result);
          })
          .catch(function (err) {
            console.log(err.message);
          });

        //   data send or post delete patch
        fetch("https://jsonplaceholder.typicode.com/posts", {
          method: "POST",
          body: JSON.stringify({
            name: "mukesh",
            age: "45",
          }),
          headers: {
            "Content-type": "application/json; charset=UTF-8",
          },
        })
          .then((res) => res.json())
          .then((result) => console.log(result))
          .catch((err) => console.log(err));
      }

      fetchData();

      // async-await
    async function letsFetchdata(){
       try{
        const data = await fetch("https://jsonplaceholder.typicode.com/posts")
        const response = await data.json();
       }catch(err){
        console.log(err)
       }
        
      }

      letsFetchdata()

    </script>
  </body>
</html>
